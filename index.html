<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>匯率儀表板</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; margin:0; background: #f8f9fa;}
        .nav { display: flex; background: #19547b; color: #fff; position: sticky; top: 0; z-index: 10;}
        .nav button { background:none; border:none; color:#fff; font-size:1rem; padding:1rem 2rem; cursor:pointer;}
        .nav button.active { background: #ffe259; color: #19547b; font-weight:bold; }

        .container {
            width: 100vw;
            min-height: calc(100vh - 70px);
            margin: 0 auto;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 18px #0001;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }

        .page { padding: 20px; }
        .hidden { display: none; }

        .rate-btns button {
            border: 1px solid #19547b; background: #fff; color: #19547b;
            border-radius: 8px; padding: 0.6rem 1.2rem; font-size:1rem; cursor:pointer;
        }
        .rate-btns button.active { background: #19547b; color: #fff; }

        iframe {
            width:100%; height: calc(100vh - 200px); border:none;
        }

    </style>
</head>
<body>
    <div class="nav">
        <button id="tab-history" class="active">歷史匯率</button>
        <button id="tab-now">即時匯率</button>
        <button id="tab-news">CNN Business</button>
    </div>

    <div class="container">
        <!-- 歷史匯率頁面 -->
        <div id="page-history" class="page">
            <div class="rate-btns">
                <button class="active" data-currency="USD">USD</button>
                <button data-currency="EUR">EUR</button>
                <button data-currency="JPY">JPY</button>
                <button data-currency="CNY">CNY</button>
            </div>
            <iframe id="frame-history" src="plot_USD.html"></iframe>
        </div>

        <!-- 即時匯率頁面 -->
        <div id="page-now" class="page hidden">
            <div class="rate-btns">
                <button class="active" data-currency="USD">USD</button>
                <button data-currency="EUR">EUR</button>
                <button data-currency="JPY">JPY</button>
                <button data-currency="CNY">CNY</button>
            </div>
            <iframe id="frame-now" src="plot_now_USD.html"></iframe>
        </div>

        <!-- 新聞頁面 -->
        <div id="page-news" class="page hidden">
            <h2>CNN Business</h2>
            <ul id="news-list"></ul>
        </div>

    </div>

    <script>
        document.querySelectorAll('.nav button').forEach(tabBtn => {
            tabBtn.onclick = () => {
                document.querySelectorAll('.nav button').forEach(btn => btn.classList.remove('active'));
                tabBtn.classList.add('active');

                const pages = ['history', 'now', 'news'];
                pages.forEach(p => document.getElementById('page-' + p).classList.add('hidden'));
                document.getElementById('page-' + tabBtn.id.split('-')[1]).classList.remove('hidden');
            };
        });

        // 幣別切換
        const historyBtns = document.querySelectorAll('#page-history .rate-btns button');
        const nowBtns = document.querySelectorAll('#page-now .rate-btns button');

        historyBtns.forEach(btn => {
            btn.onclick = () => {
                historyBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById('frame-history').src = `plot_${btn.dataset.currency}.html`;
            };
        });

        nowBtns.forEach(btn => {
            btn.onclick = () => {
                nowBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.getElementById('frame-now').src = `plot_now_${btn.dataset.currency}.html`;
            };
        });

        // CNN Business
        fetch('cnn_news.txt')
        .then(resp => resp.text())
        .then(text => {
            const lines = text.trim().split('\n');
            let html = '';
            lines.forEach((line,i) => {
                const [title, url] = line.split(/\s+(https?:\/\/\S+)/);
                html += `<li><a href="${url}" target="_blank">${i+1}. ${title}</a></li>`;
            });
            document.getElementById('news-list').innerHTML = html;
        });
    </script>
</body>
</html>
